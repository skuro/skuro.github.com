<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html>
  <head>
    <title>SKURO! -- Shading lights</title>
    <meta name="generator" content="skuro.tk/0.1 | jekyll/0.11.0" />
    <meta name="description" content="Personal Blog of Carlo Sciolla" />
    <meta name="keywords" content="clojure,enlive,moustache,java,alfresco,lambdalf,performance" />
    <link rel="stylesheet" href="/css/skuro.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="/css/font.css" type="text/css" media="screen" />
  </head>
  <body>
    <div id="container">
    <div id="wrapper">
      <div id="sidebar">
        <h1 class="homelink" id="logo">SKURO!</h1>
        <div id="links">
          <span>
            <a href="/archive/">archive</a>
          </span>
          <span>
            <a href="/category/">categories</a>
          </span>
          <span>
            <a href="/about/">about</a>
          </span>
        </div>
        <img class="homelink" src="/img/avatar.jpg" id="avatar" />
        <h4 id="underlogo">shading lights</h4>
        <div id="social">
          <div id="mousing"></div>
          <a href="http://github.com/skuro">
            <img src="/img/github.png" id="github" />
          </a>
          <a href="http://twitter.com/skuro">
            <img src="/img/twitter.png" id="twitter" />
          </a>
          <a href="http://feeds.feedburner.com/Skuro">
            <img src="/img/rss.png" id="rss" />
          </a>
          <a href="http://nl.linkedin.com/in/carlosciolla">
            <img src="/img/linkedin.png" id="linkedin" />
          </a>
        </div>
        <div id="googleads">
          <script type="text/javascript">
            <!--
                google_ad_client = "ca-pub-5536661153340295";
                /* jekyll-site */
                google_ad_slot = "1546169966";
                google_ad_width = 120;
                google_ad_height = 240;
                //-->
          </script>
          <script type="text/javascript"
                  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
          </script>
        </div>
      </div>
      
      <div id="content">
        <div class="post">
  <h1 class="title">
  <a href="/2009/02/15/tutorial-vodafone-umts-modem-on-a-debian-lenny">Tutorial: Vodafone UMTS modem on a Debian lenny</a>
</h1>
<h2 class="date">
  February 15, 2009
  
   -- filed under 
  
  <a href="/category/linux">#linux</a>
  
  
</h2>

  
  <img src="/img/post/vodafone-umts.jpg" class="primary" />
  
  <p>Today I finally had the time to give it a try to have my Vodafone UMTS modem running on my [not so] old Debian lenny/SID which is actually powering my desktop  PC.
I was a little scared, I must admit, since I never dealt with PPP stuff with linux... I always avoided it actually â˜º</p>

<p>It turned out, it was way much easier than I originally thought. The tougher part was due to my PC have no internet connection available, so that I had no chance to apt-get nothing. I knew there would be something missing, as there actually were, so I turned on my MacBook pro[<a href="#note-2">1</a>] (for which Mama VF provides a crappy software) and stated digging the net for what I needed...</p>

<p>My Linux skills are not being used since some months, but I still remember some rules about a penguin dealing with new cool devices.</p>

<h2>Know your hardware</h2>

<p>As always, the first thing you have to do when trying to install some new device on a linux box is to collect as much information as possible about the harware it is based on. This time it was  too easy: the bottom part of the modem has some bold lines stating</p>

<pre><code>HUAWEI
Model: e220
</code></pre>

<p>way too easy, man!</p>

<h2>Find out if/how good your hardware is already sopported</h2>

<p>I was expecting some exotic standalone projects were offering linux support for this little device, but it turned out it is supported out of the box by the Linux kernel since version 2.6.20, and it's written also in the <a title="Huawei e220 on wikipedia" href="http://en.wikipedia.org/wiki/Vodafone_Mobile_Connect_USB_Modem">wikipedia entry</a> for the modem! Geezz... time has changed, don't you think so?º</p>

<p>A quick check make a growing fear disappear[<a href="#note-2">2</a>]:</p>

<pre><code>sku@dreamland:~$ uname -r
2.6.22-1-mepis-smp
</code></pre>

<p>YES!</p>

<h2>Find out some how-to and do it!</h2>

<p>The official Debian wiki <a href="http://wiki.debian.org/Huawei/E220">says</a> simply:</p>

<blockquote>wvdial hsdpa</blockquote>


<p>That's it.Uhm.. no configuration, no telephone number to dial, no PIN, no nothing?! That's strange... but let's give it a try:</p>

<pre><code>sku@dreamland:~$ wvdial hsdpa
bash: wvdial: command not found
</code></pre>

<p>Ok, I already knew it. Here starts the real game! Luckily enough, there is a Debian package named wvdial which should bring all the stuff I need in my box. Since I have no internet connection, the only chance I have is to download all the .deb files by hand and install it via dpkg. apt-get told me I needed only four of the dependencies for wvdial, so I downloaded them following the links on <a href="http://packages.debian.org/lenny/wvdial">packages.debian.org</a> to cope with the version hell. Once transferred the files from the Mac into the PC, I let Debian handle them:</p>

<pre><code>sku@dreamland:~$ sudo dpkg -i *.deb
</code></pre>

<h2>Find the right configuration</h2>

<p>It was impossible that no configuration at all was needed, and in fact some stuff was to be written somewhere, since wvdial complained about no wvdial.conf present in /etc. The first configuration was obtained with the wvdialconf tool provided by the wvdial package, but something was still missing:</p>

<pre><code>sku@dreamland:~/Desktop/wvdial/test$ wvdial
--&gt; WvDial: Internet dialer version 1.60
--&gt; Cannot get information for serial port.
--&gt; Initializing modem.
--&gt; Sending: ATZ
ATZ
OK
--&gt; Sending: ATQ0 V1 E1 S0=0 &amp;amp;amp;C1 &amp;amp;amp;D2
ATQ0 V1 E1 S0=0 &amp;amp;amp;C1 &amp;amp;amp;D2
OK
--&gt; Modem initialized.
--&gt; Configuration does not specify a valid phone number.
--&gt; Configuration does not specify a valid login name.
--&gt; Configuration does not specify a valid password.
sku@dreamland:~/Desktop/wvdial/test$
</code></pre>

<p>After some other Internet investigation and tries, I finally came to a working configuration (user name and password can be anything, AFAIK):</p>

<pre><code>sku@dreamland:~$ cat /etc/wvdial.conf
[Dialer Defaults]
Init1 = ATZ
Init2 = ATQ0 V1 E1 S0=0 &amp;amp;amp;C1 &amp;amp;amp;D2
Init3 = AT+CPIN=&amp;quot;0000&amp;quot;
Modem Type = Analog Modem
ISDN = 0
New PPPD = yes
Phone = *99***1#
Modem = /dev/ttyUSB0
Username = vodafone
Password = vodafone
Baud = 460800
</code></pre>

<h2>Have fun</h2>

<p>Last time <code>sudo wvdial</code> did the trick and, well, now I'm writing this post from my PC through the Huawei e220! ;)
I really appreciate how straightforward is now to do such things in Linux. Apart from the configuration, for which I had to guess a little bit how to handle it by my own, apt-get and a good howto would have been enough for everyone to install the required software.</p>

<p>Since configuration is (as quite always) the hard part, the posted wvdial.conf is the real useful part of the whole tutorial. My UMTS provider is actually Vodafone NL, but the configuration posted should be good for other carriers too.</p>

<p>That's it, hope it helps!</p>

<p><a name="note-1">[1]</a> connection sharing from the UMTS modem to either WiFi or Ethernet peers doesn't work  from my Mac. I tried several times but with no luck...</p>

<p><a name="note-2">[2]</a> ok, yes, my kernel is actually from Mepis, but I've update the whole system and now I'm on a quite pure Debian lenny :)</p>

  
  <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'skuro';
//    var disqus_id = '/2009/02/15/tutorial-vodafone-umts-modem-on-a-debian-lenny';
//    var disqus_url = [location.protocol, '//', location.host, location.pathname].join('');

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

  

</div>

      </div>
      
    </div>
    <div id="footer">
      <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" style="border-width:0;margin-bottom:10px" alt="Creative Commons License" /></a><br /><span rel="dct:type" property="dct:title" href="http://purl.org/dc/dcmitype/Text">SKURO! Blog</span> by <a rel="cc:attributionURL" property="cc:attributionName" href="http://skuro.tk">Carlo Sciolla</a> is licensed under a <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.<br />Based on a work at <a rel="dct:source" href="http://skuro.tk">skuro.tk</a>.
    </div>
    </div>
    <script src="/js/jquery.min.1.4.1.js" type="text/javascript">
    </script>
    <script src="/js/skuro.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      try{ 
        var pageTracker = _gat._getTracker("UA-6754361-1");
        pageTracker._trackPageview();
      } catch(err) {} 
</script>
  </body>
</html>
