<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html>
  <head>
    <title>SKURO! -- Shading lights</title>
    <meta name="generator" content="skuro.tk/0.1 | jekyll/0.11.0" />
    <meta charset="utf-8" />
    <meta name="description" content="Personal Blog of Carlo Sciolla" />
    <meta name="keywords" content="clojure,enlive,moustache,java,alfresco,lambdalf,performance" />
    <link rel="stylesheet" href="/stylesheets/styles.css" />
    <link rel="stylesheet" href="/stylesheets/pygment_trac.css" />
    <link rel="stylesheet" href="/stylesheets/skuro.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="adsense">
      <script type="text/javascript"><!--
                                         google_ad_client = "ca-pub-5536661153340295";
                                         /* ghpages-skyscraper */
                                         google_ad_slot = "1277668326";
                                         google_ad_width = 120;
                                         google_ad_height = 600;
                                         //-->
      </script>
      <script type="text/javascript"
              src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script>
    </div>
    <div class="wrapper">
      <header>
        <span class="avatar">
          <img src="http://www.gravatar.com/avatar/3246c43cf35485e40a18e72fa1fa7ace" />
        </span>
        <h1><a href="/">SKURO!</a></h1>
        <ul>
          <li><a href="/archive">Browse the <strong>Archive</strong></a></li>
          <li><a href="/category">Browse by <strong>Categories</strong></a></li>
          <li><a href="/about">Learn more <strong>About me</strong></a></li>
        </ul>
        <p class="persona">
          <a href="https://github.com/skuro"><img src="/img/github.png" /></a>
          <a href="http://nl.linkedin.com/in/carlosciolla"><img src="/img/linkedin.png" /></a>
          <a href="https://twitter.com/skuro"><img src="/img/twitter.png" /></a>
          <a href="/rss2.xml"><img src="/img/rss.png" /></a>
          <span>shading lights</span>
        </p>
      </header>
      
      <section>
        <div class="post">
  <h1>
  Quick fix for ALSA error: cannot find the slot for index 0
  <a href="/2009/04/05/quick-fix-for-alsa-error-cannot-find-the-slot-for-index-0">
    <img src="/img/link.jpg" alt="Permalink to Quick fix for ALSA error: cannot find the slot for index 0" />
  </a>
</h1>
<blockquote class="date-wrapper">
  <h5 class="date">
    April  5, 2009
    
    &nbsp;
    
    <a href="/category/linux">#linux</a><span>&nbsp;&nbsp;</span>
    
    
  </h5>
</blockquote>

  
  <img src="/img/post/console-snapshot.png" class="primary" />
  
  <p>Since the last kernel upgrade (now running a slightly customized 2.6.28) I started to experience a nasty issue with my audio configuration. I haven't had the time to look at it since today, and it actually took a bit to figure out what was going wrong. Actually, my integrated audio card was no more visible on the system, i.e.:</p>

<pre><code>sku@dreamland:~$ cat /proc/asound/cards
0 [U0x46d0x9a1    ]: USB-Audio - USB Device 0x46d:0x9a1
USB Device 0x46d:0x9a1 at usb-0000:00:1a.7-4, high speed
</code></pre>

<p>This actually means that ALSA only recognizes an USB audio device, which actually is my mic-enhanced web cam. From previous experiences, I knew the kernel module I have to look at for my integrated audio card was <em>snd_hda_intel</em>, and <em>lsmod</em> was actually listing it among the loaded modules. Something wrong probably happened when that module was loaded. Since I'm too lazy even to grep inside of syslog for that module, I just give it another chance with <em>rmmod snd_hda_intel ; lsmod snd_hda_intel</em>. Nothing changed. This time, with a <em>tail -f</em> on syslog:</p>

<pre><code>Apr  5 11:58:36 dreamland kernel: ALSA /usr/src/modules/alsa-driver/acore/init.c:138: cannot find the slot for index 0 (range 0-0), error: -16
Apr  5 11:58:36 dreamland kernel: ALSA /usr/src/modules/alsa-driver/pci/hda/../../alsa-kernel/pci/hda/hda_intel.c:1878: hda-intel: Error creating card!
Apr  5 11:58:36 dreamland kernel: HDA Intel: probe of 0000:00:1b.0 failed with error -12
</code></pre>

<p>AHA! Probably someone already noticed the issue: while /proc/sound/cards lists my USB card already installed in slot #0, snd_hda_intel is trying to use that one and only slot (index 0, range 0-0) to install the other card. This requires some modprobe configuration. My system offered already a /etc/modprobe.d/snd-hda-intel, which only contained:</p>

<pre><code>options snd-hda-intel position_fix=2
options snd-hda-intel model=auto
</code></pre>

<p>I actually don't even know what that actually means, so I left those lines there while adding something above them. The resulting file is:</p>

<pre><code>alias snd-card-1 snd-usb-audio
option snd-usb-audio index=1
alias snd-card-0 snd-hda-intel
option snd-hda-intel index=0
options snd-hda-intel position_fix=2
options snd-hda-intel model=auto
</code></pre>

<p>What I'm trying to do is obvious: put the cards in the correct order. And know what? It works! The image at the top of this post shows you it.
Probably there are other more clever way to configure it, so any suggestion is welcome.</p>

  
  <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'skuro';
//    var disqus_id = '/2009/04/05/quick-fix-for-alsa-error-cannot-find-the-slot-for-index-0';
//    var disqus_url = [location.protocol, '//', location.host, location.pathname].join('');

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

  

</div>

      </section>

    </div>
    <footer>
      <p><a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" style="border-width:0;margin-bottom:10px" alt="Creative Commons License" /></a> licensed under a Creative Commons <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license">license</a>
      <p><span rel="dct:type" property="dct:title" href="http://purl.org/dc/dcmitype/Text">SKURO! blog</span> by <a rel="cc:attributionURL" property="cc:attributionName" href="http://skuro.tk">Carlo Sciolla</a></p>
    </footer>

    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      try{ 
      var pageTracker = _gat._getTracker("UA-6754361-1");
      pageTracker._trackPageview();
      } catch(err) {} 
    </script>

  </body>
</html>
